# Frontend Chat Memory - Testing Guide

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ frontend

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ

1. **Session Management**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `session_id` –≤ `localStorage`
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏

2. **New Chat Button**
   - –ö–Ω–æ–ø–∫–∞ "üîÑ New Chat" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
   - –û—á–∏—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
   - –ù–∞—á–∏–Ω–∞–µ—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é

3. **Session Indicator**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å: "‚óè Chat memory active"
   - –ó–µ–ª–µ–Ω–∞—è —Ç–æ—á–∫–∞ = –ø–∞–º—è—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç
   - Tooltip –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç session_id

4. **Console Logging**
   - –õ–æ–≥–∏ —Å–æ–∑–¥–∞–Ω–∏—è/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
   - –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è session_id

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–∞—è –ø–∞–º—è—Ç—å

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000
2. –ù–∞–ø–∏—à–∏—Ç–µ: "–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç Dias"
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**: –í –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–∞–¥–ø–∏—Å—å "‚óè Chat memory active"
5. –ù–∞–ø–∏—à–∏—Ç–µ: "–ö–∞–∫ –º–µ–Ω—è –∑–æ–≤—É—Ç?"
6. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ë–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç "–í–∞—Å –∑–æ–≤—É—Ç Dias"

### –¢–µ—Å—Ç 2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç
2. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (F5)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–æ–ø—Ä–æ—Å, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ë–æ—Ç –ø–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç!

**–ü—Ä–∏–º–µ—Ä:**
```
–°–æ–æ–±—â–µ–Ω–∏–µ 1: "–ü–æ–∫–∞–∂–∏ –º–æ–π –±–∞–ª–∞–Ω—Å"
–û—Ç–≤–µ—Ç: "–í–∞—à –æ–±—â–∏–π –±–∞–ª–∞–Ω—Å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç..."

[–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã F5]

–°–æ–æ–±—â–µ–Ω–∏–µ 2: "–ê —Å–∫–æ–ª—å–∫–æ –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö?"
–û—Ç–≤–µ—Ç: "–ù–∞ —Å—á–µ—Ç–µ –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö 5,000 USD" (–ø–æ–º–Ω–∏—Ç —á—Ç–æ —Ä–µ—á—å –æ –±–∞–ª–∞–Ω—Å–µ!)
```

### –¢–µ—Å—Ç 3: –ö–Ω–æ–ø–∫–∞ "New Chat"

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"üîÑ New Chat"** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –æ—á–∏—Å—Ç–∫—É
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**:
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "Chat memory active" –∏—Å—á–µ–∑
   - –ü–æ—è–≤–∏–ª–æ—Å—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**: –ü–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π session_id –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–µ

### –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Application ‚Üí Local Storage ‚Üí http://localhost:8000
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–ª—é—á `chat_session_id`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `session_user_123`)
5. –í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
localStorage.getItem('chat_session_id')
```

### –¢–µ—Å—Ç 5: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –¥–∏–∞–ª–æ–≥ (—Ñ–∏–Ω–∞–Ω—Å—ã)

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –†–∞—Å—Ö–æ–¥—ã**
```
–í—ã: –ü–æ–∫–∞–∂–∏ –º–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã –∑–∞ –º–µ—Å—è—Ü
–ë–æ—Ç: –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü –≤–∞—à–∏ —Ä–∞—Å—Ö–æ–¥—ã —Å–æ—Å—Ç–∞–≤–∏–ª–∏ 450,000 —Ç–µ–Ω–≥–µ...

–í—ã: –ê —Å–∫–æ–ª—å–∫–æ –∏–∑ –Ω–∏—Ö –Ω–∞ –∞—Ä–µ–Ω–¥—É?
–ë–æ—Ç: –ù–∞ –∞—Ä–µ–Ω–¥—É –±—ã–ª–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ 150,000 —Ç–µ–Ω–≥–µ (–ø–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç!)
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ë–∞–ª–∞–Ω—Å**
```
–í—ã: –ö–∞–∫–æ–π —É –º–µ–Ω—è –±–∞–ª–∞–Ω—Å?
–ë–æ—Ç: –í–∞—à –æ–±—â–∏–π –±–∞–ª–∞–Ω—Å: 2,100,000 —Ç–µ–Ω–≥–µ...

–í—ã: –ê –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º —Å—á–µ—Ç–µ —Å–∫–æ–ª—å–∫–æ?
–ë–æ—Ç: –ù–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–º —Å—á–µ—Ç–µ 5,000 USD (–ø–æ–º–Ω–∏—Ç —á—Ç–æ —Ä–µ—á—å –æ –±–∞–ª–∞–Ω—Å–µ!)
```

## –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

### Session Indicator States

**–ù–µ–∞–∫—Ç–∏–≤–Ω–∞ (–Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è):**
```
[–ø—É—Å—Ç–æ]
```

**–ê–∫—Ç–∏–≤–Ω–∞:**
```
‚óè Chat memory active
```

### New Chat Button

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ü§ñ AI Finance Assistant      üîÑ New Chat ‚îÇ
‚îÇ Ask questions about documentation...     ‚îÇ
‚îÇ                        ‚óè Chat memory active ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Console Logs (F12)

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
```
Starting new session
Session saved: session_user_123
```

–ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
```
Resuming session: session_user_123
Session saved: session_user_123
```

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "New Chat":
```
Session cleared: session_user_123
New chat started
Session saved: session_user_456
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Browser DevTools

### Network Tab
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ POST /chat –∑–∞–ø—Ä–æ—Å:

**–ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å (–±–µ–∑ session_id):**
```json
{
  "message": "–ü—Ä–∏–≤–µ—Ç!"
}
```

**Response:**
```json
{
  "answer": "...",
  "session_id": "session_user_123",
  "sources": [...]
}
```

**–í—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å (—Å session_id):**
```json
{
  "message": "–ö–∞–∫ –¥–µ–ª–∞?",
  "session_id": "session_user_123"
}
```

### Application Tab
```
Local Storage
  ‚îî‚îÄ http://localhost:8000
      ‚îî‚îÄ chat_session_id: "session_user_123"
```

## Troubleshooting

### –ü–∞–º—è—Ç—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: localStorage**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log(localStorage.getItem('chat_session_id'));
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: Network**
- –û—Ç–∫—Ä–æ–π—Ç–µ Network tab
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `session_id` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ request body

**–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: Backend logs**
```bash
docker-compose logs backend | grep "Session"
```

### Session_id –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—á–∏—Å—Ç–∏—Ç–µ localStorage:
```javascript
localStorage.clear();
```
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### Indicator –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ JavaScript
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `updateSessionIndicator()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

## Best Practices –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. **–ù–µ –æ—á–∏—â–∞–π—Ç–µ localStorage** –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "New Chat"** –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
3. **–ó–∞–∫–ª–∞–¥–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞** —Å–æ—Ö—Ä–∞–Ω–∏—Ç –≤–∞—à—É —Å–µ—Å—Å–∏—é
4. **–ü—Ä–∏–≤–∞—Ç–Ω–æ–µ –æ–∫–Ω–æ** = –Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è –∫–∞–∂–¥—ã–π —Ä–∞–∑

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Å–æ–ª–∏

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é
console.log(sessionId);

// –û—á–∏—Å—Ç–∏—Ç—å —Å–µ—Å—Å–∏—é –≤—Ä—É—á–Ω—É—é
localStorage.removeItem('chat_session_id');
sessionId = null;
updateSessionIndicator();

// –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é (–µ—Å–ª–∏ session_id –∏–∑–≤–µ—Å—Ç–µ–Ω)
fetch('/chat/history/session_user_123')
  .then(r => r.json())
  .then(console.log);
```

## –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üöÄ

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:
```bash
docker-compose restart backend
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000 –∏ –Ω–∞—á–Ω–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞–º—è—Ç—å!
